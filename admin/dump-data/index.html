<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans'; background: #fff; color: #111827; padding: 16px; }
    h2 { font-size: 16px; margin: 8px 0; }
    table { width: 100%; border-collapse: collapse; margin-top: 12px; }
    thead th { background: #eef2ff; position: sticky; top: 0; z-index: 1; }
    th, td { border: 1px solid #cbd5e1; padding: 6px 8px; text-align: right; min-width: 100px; }
    th:first-child, td:first-child { text-align: left; }
    tbody td:first-child { font-weight: 600; }
    ol { padding-left: 18px; }
    button { padding: 6px 10px; border: 1px solid #cbd5e1; background: #f8fafc; border-radius: 6px; cursor: pointer; }
    button:hover { background: #eef2ff; }
    td[contenteditable="true"] { background: #ffffff; }
    td.editing { outline: 2px solid #93c5fd; }
    input, select { font-family: inherit; font-size: 14px; }
    .input { padding: 6px 8px; border: 1px solid #cbd5e1; border-radius: 6px; background:#fff; }
  </style>
</head>
<body>
  <div id="controls" style="position:sticky; top:0; background:#ffffff; z-index:3; padding-bottom:8px; display:flex; gap:8px; align-items:center; border-bottom: 1px dashed #e5e7eb;">
    <button id="btnEdit">Edit</button>
    <button id="btnSave">Save</button>
    
    
    <a id="apiLink" href="#" target="_blank" style="font-size:12px; color:#2563eb; text-decoration:underline; white-space:nowrap;">API Link</a>
    <button id="btnCopyLink">Copy Link</button>
    <span id="status" style="margin-left:auto; font-size:12px; color:#6b7280;">View mode</span>
  </div>
  <table id="scanTable" style="margin-top:16px;">
    <thead>
      <tr>
        <th></th>
        <th>Scan 1 @ 2025-09-01  11:00  UTC</th> <th>Scan 2 @ 2025-09-01  12:00  UTC</th> <th>Scan 3 @ 2025-09-01  13:00  UTC</th> <th>Scan 4 @ 2025-09-01  14:01  UTC</th> <th>Scan 5 @ 2025-09-01  15:01  UTC</th> <th>Scan 6 @ 2025-09-01  16:02  UTC</th> <th>Scan 7 @ 2025-09-01  17:01  UTC</th> <th>Scan 8 @ 2025-09-01  18:01  UTC</th> <th>Scan 9 @ 2025-09-01  19:02  UTC</th> <th>Scan 10 @ 2025-09-01  20:02  UTC</th> <th>Scan 11 @ 2025-09-01  21:02  UTC</th> <th>Scan 12 @ 2025-09-01  22:02  UTC</th> <th>Scan 13 @ 2025-09-01  23:02  UTC</th> <th>Scan 14 @ 2025-09-02  00:02  UTC</th> <th>Scan 15 @ 2025-09-02  01:02  UTC</th> <th>Scan 16 @ 2025-09-02  02:02  UTC</th> <th>Scan 17 @ 2025-09-02  03:03  UTC</th> <th>Scan 18 @ 2025-09-02  04:02  UTC</th> <th>Scan 19 @ 2025-09-02  05:02  UTC</th> <th>Scan 20 @ 2025-09-02  06:03  UTC</th> <th>Scan 21 @ 2025-09-02  07:03  UTC</th> <th>Scan 22 @ 2025-09-02  08:05  UTC</th> <th>Scan 23 @ 2025-09-02  09:03  UTC</th> <th>Scan 24 @ 2025-09-02  10:03  UTC</th> <th>Scan 25 @ 2025-09-02  11:03  UTC</th> <th>Scan 26 @ 2025-09-02  12:03  UTC</th> <th>Scan 27 @ 2025-09-02  13:03  UTC</th> <th>Scan 28 @ 2025-09-02  14:04  UTC</th> <th>Scan 29 @ 2025-09-02  15:05  UTC</th> <th>Scan 30 @ 2025-09-02  16:04  UTC</th> <th>Scan 31 @ 2025-09-02  17:05  UTC</th> <th>Scan 32 @ 2025-09-02  18:08  UTC</th> <th>Scan 33 @ 2025-09-02  19:06  UTC</th> <th>Scan 34 @ 2025-09-02  20:05  UTC</th> <th>Scan 35 @ 2025-09-02  21:05  UTC</th> <th>Scan 36 @ 2025-09-02  22:06  UTC</th> <th>Scan 37 @ 2025-09-02  23:06  UTC</th> <th>Scan 38 @ 2025-09-03  00:06  UTC</th> <th>Scan 39 @ 2025-09-03  01:06  UTC</th> <th>Scan 40 @ 2025-09-03  02:06  UTC</th> <th>Scan 41 @ 2025-09-03  03:06  UTC</th> <th>Scan 42 @ 2025-09-03  04:07  UTC</th> <th>Scan 43 @ 2025-09-03  05:06  UTC</th> <th>Scan 44 @ 2025-09-03  06:06  UTC</th> <th>Scan 45 @ 2025-09-03  07:06  UTC</th> <th>Scan 46 @ 2025-09-03  08:06  UTC</th> <th>Scan 47 @ 2025-09-03  09:06  UTC</th> <th>Scan 48 @ 2025-09-03  10:06  UTC</th> <th>Scan 49 @ 2025-09-03  11:06  UTC</th> <th>Scan 50 @ 2025-09-03  12:07  UTC</th> <th>Scan 51 @ 2025-09-03  13:08  UTC</th> <th>Scan 52 @ 2025-09-03  14:11  UTC</th> <th>Scan 53 @ 2025-09-03  15:10  UTC</th> <th>Scan 54 @ 2025-09-03  16:13  UTC</th> <th>Scan 55 @ 2025-09-03  17:14  UTC</th> <th>Scan 56 @ 2025-09-03  18:12  UTC</th> <th>Scan 57 @ 2025-09-03  19:10  UTC</th> <th>Scan 58 @ 2025-09-03  20:13  UTC</th> <th>Scan 59 @ 2025-09-03  21:09  UTC</th> <th>Scan 60 @ 2025-09-03  22:10  UTC</th> <th>Scan 61 @ 2025-09-03  23:10  UTC</th> <th>Scan 62 @ 2025-09-04  00:12  UTC</th> <th>Scan 63 @ 2025-09-04  01:11  UTC</th> <th>Scan 64 @ 2025-09-04  02:14  UTC</th> <th>Scan 65 @ 2025-09-04  03:11  UTC</th> <th>Scan 66 @ 2025-09-04  04:09  UTC</th> <th>Scan 67 @ 2025-09-04  05:09  UTC</th> <th>Scan 68 @ 2025-09-04  06:10  UTC</th> <th>Scan 69 @ 2025-09-04  07:09  UTC</th> <th>Scan 70 @ 2025-09-04  08:08  UTC</th> <th>Scan 71 @ 2025-09-04  09:10  UTC</th> <th>Scan 72 @ 2025-09-04  10:10  UTC</th> <th>Scan 73 @ 2025-09-04  11:13  UTC</th> <th>Scan 74 @ 2025-09-04  12:16  UTC</th> <th>Scan 75 @ 2025-09-04  13:13  UTC</th> <th>Scan 76 @ 2025-09-04  14:13  UTC</th> <th>Scan 77 @ 2025-09-04  15:14  UTC</th> <th>Scan 78 @ 2025-09-04  16:19  UTC</th> <th>Scan 79 @ 2025-09-04  17:19  UTC</th> <th>Scan 80 @ 2025-09-04  18:15  UTC</th> <th>Scan 81 @ 2025-09-04  19:14  UTC</th> <th>Scan 82 @ 2025-09-04  20:19  UTC</th> <th>Scan 83 @ 2025-09-04  21:14  UTC</th> <th>Scan 84 @ 2025-09-04  22:18  UTC</th> <th>Scan 85 @ 2025-09-04  23:14  UTC</th> <th>Scan 86 @ 2025-09-05  00:15  UTC</th> <th>Scan 87 @ 2025-09-05  01:13  UTC</th> <th>Scan 88 @ 2025-09-05  02:14  UTC</th> <th>Scan 89 @ 2025-09-05  03:13  UTC</th> <th>Scan 90 @ 2025-09-05  04:11  UTC</th> <th>Scan 91 @ 2025-09-05  05:12  UTC</th> <th>Scan 92 @ 2025-09-05  06:12  UTC</th> <th>Scan 93 @ 2025-09-05  07:12  UTC</th> <th>Scan 94 @ 2025-09-05  08:12  UTC</th> <th>Scan 95 @ 2025-09-05  09:12  UTC</th> <th>Scan 96 @ 2025-09-05  10:12  UTC</th> <th>Scan 97 @ 2025-09-05  11:12  UTC</th> <th>Scan 98 @ 2025-09-05  12:16  UTC</th> <th>Scan 99 @ 2025-09-05  13:15  UTC</th> <th>Scan 100 @ 2025-09-05  14:15  UTC</th> <th>Scan 101 @ 2025-09-05  15:15  UTC</th> <th>Scan 102 @ 2025-09-05  16:17  UTC</th> <th>Scan 103 @ 2025-09-05  17:15  UTC</th> <th>Scan 104 @ 2025-09-05  18:15  UTC</th> <th>Scan 105 @ 2025-09-05  19:24  UTC</th> <th>Scan 106 @ 2025-09-05  20:18  UTC</th> <th>Scan 107 @ 2025-09-05  21:16  UTC</th> <th>Scan 108 @ 2025-09-05  22:15  UTC</th> <th>Scan 109 @ 2025-09-05  23:15  UTC</th> <th>Scan 110 @ 2025-09-06  00:18  UTC</th> <th>Scan 111 @ 2025-09-06  01:20  UTC</th> <th>Scan 112 @ 2025-09-06  02:22  UTC</th> <th>Scan 113 @ 2025-09-06  03:17  UTC</th> <th>Scan 114 @ 2025-09-06  04:20  UTC</th> <th>Scan 115 @ 2025-09-06  05:15  UTC</th> <th>Scan 116 @ 2025-09-06  06:15  UTC</th> <th>Scan 117 @ 2025-09-06  07:15  UTC</th> <th>Scan 118 @ 2025-09-06  08:16  UTC</th> <th>Scan 119 @ 2025-09-06  09:17  UTC</th> <th>Scan 120 @ 2025-09-06  10:17  UTC</th> <th>Scan 121 @ 2025-09-06  11:17  UTC</th> <th>Scan 122 @ 2025-09-06  12:17  UTC</th> <th>Scan 123 @ 2025-09-06  13:18  UTC</th> <th>Scan 124 @ 2025-09-06  14:21  UTC</th> <th>Scan 125 @ 2025-09-06  15:20  UTC</th> <th>Scan 126 @ 2025-09-06  16:23  UTC</th> <th>Scan 127 @ 2025-09-06  17:20  UTC</th> <th>Scan 128 @ 2025-09-06  18:20  UTC</th> <th>Scan 129 @ 2025-09-06  19:21  UTC</th> <th>Scan 130 @ 2025-09-06  20:23  UTC</th> <th>Scan 131 @ 2025-09-06  21:19  UTC</th> <th>Scan 132 @ 2025-09-06  22:19  UTC</th> <th>Scan 133 @ 2025-09-06  23:19  UTC</th> <th>Scan 134 @ 2025-09-07  00:21  UTC</th> <th>Scan 135 @ 2025-09-07  01:22  UTC</th> <th>Scan 136 @ 2025-09-07  02:24  UTC</th> <th>Scan 137 @ 2025-09-07  03:21  UTC</th> <th>Scan 138 @ 2025-09-07  04:18  UTC</th> <th>Scan 139 @ 2025-09-07  05:20  UTC</th> <th>Scan 140 @ 2025-09-07  06:18  UTC</th> <th>Scan 141 @ 2025-09-07  07:18  UTC</th> <th>Scan 142 @ 2025-09-07  08:18  UTC</th> <th>Scan 143 @ 2025-09-07  09:18  UTC</th> <th>Scan 144 @ 2025-09-07  10:17  UTC</th> <th>Scan 145 @ 2025-09-07  11:23  UTC</th> <th>Scan 146 @ 2025-09-07  12:19  UTC</th> <th>Scan 147 @ 2025-09-07  13:19  UTC</th> <th>Scan 148 @ 2025-09-07  14:20  UTC</th> <th>Scan 149 @ 2025-09-07  15:21  UTC</th> <th>Scan 150 @ 2025-09-07  16:22  UTC</th> <th>Scan 151 @ 2025-09-07  17:22  UTC</th> <th>Scan 152 @ 2025-09-07  18:24  UTC</th> <th>Scan 153 @ 2025-09-07  19:23  UTC</th> <th>Scan 154 @ 2025-09-07  20:24  UTC</th> <th>Scan 155 @ 2025-09-07  21:22  UTC</th> <th>Scan 156 @ 2025-09-07  22:22  UTC</th> <th>Scan 157 @ 2025-09-07  23:22  UTC</th> <th>Scan 158 @ 2025-09-08  00:25  UTC</th> <th>Scan 159 @ 2025-09-08  01:25  UTC</th> <th>Scan 160 @ 2025-09-08  02:27  UTC</th> <th>Scan 161 @ 2025-09-08  03:21  UTC</th> <th>Scan 162 @ 2025-09-08  04:20  UTC</th> <th>Scan 163 @ 2025-09-08  06:20  UTC</th> <th>Scan 164 @ 2025-09-08  07:20  UTC</th> <th>Scan 165 @ 2025-09-08  08:21  UTC</th> <th>Scan 166 @ 2025-09-08  09:20  UTC</th> <th>Scan 167 @ 2025-09-08  10:26  UTC</th>
      </tr>
    </thead>
    <tbody>
      <tr data-metric="views">
        <td>views</td>
        <td>90</td> <td>115</td> <td>145</td> <td>207</td> <td>284</td> <td>591</td> <td>1,040</td> <td>1,101</td> <td>1,124</td> <td>1,138</td> <td>1,148</td> <td>1,155</td> <td>1,164</td> <td>1,179</td> <td>1,186</td> <td>1,189</td> <td>1,195</td> <td>1,204</td> <td>1,211</td> <td>1,215</td> <td>1,219</td> <td>1,227</td> <td>1,229</td> <td>1,233</td> <td>1,236</td> <td>1,247</td> <td>1,253</td> <td>1,260</td> <td>1,265</td> <td>1,269</td> <td>1,275</td> <td>1,281</td> <td>1,284</td> <td>1,288</td> <td>1,290</td> <td>1,291</td> <td>1,295</td> <td>1,300</td> <td>1,301</td> <td>1,302</td> <td>1,303</td> <td>1,305</td> <td>1,305</td> <td>1,307</td> <td>1,312</td> <td>1,317</td> <td>1,317</td> <td>1,318</td> <td>1,319</td> <td>1,322</td> <td>1,323</td> <td>1,327</td> <td>1,332</td> <td>1,335</td> <td>1,336</td> <td>1,336</td> <td>1,337</td> <td>1,340</td> <td>1,344</td> <td>1,347</td> <td>1,350</td> <td>1,353</td> <td>1,357</td> <td>1,357</td> <td>1,360</td> <td>1,360</td> <td>1,362</td> <td>1,367</td> <td>1,367</td> <td>1,367</td> <td>1,370</td> <td>1,371</td> <td>1,372</td> <td>1,374</td> <td>1,375</td> <td>1,375</td> <td>1,375</td> <td>1,376</td> <td>1,378</td> <td>1,381</td> <td>1,381</td> <td>1,381</td> <td>1,384</td> <td>1,386</td> <td>1,386</td> <td>1,388</td> <td>1,389</td> <td>1,389</td> <td>1,390</td> <td>1,390</td> <td>1,390</td> <td>1,390</td> <td>1,390</td> <td>1,390</td> <td>1,390</td> <td>1,390</td> <td>1,390</td> <td>1,390</td> <td>1,390</td> <td>1,390</td> <td>1,394</td> <td>1,396</td> <td>1,396</td> <td>1,396</td> <td>1,396</td> <td>1,400</td> <td>1,402</td> <td>1,402</td> <td>1,405</td> <td>1,406</td> <td>1,408</td> <td>1,409</td> <td>1,410</td> <td>1,410</td> <td>1,410</td> <td>1,410</td> <td>1,410</td> <td>1,414</td> <td>1,418</td> <td>1,425</td> <td>1,429</td> <td>1,432</td> <td>1,443</td> <td>1,450</td> <td>1,459</td> <td>1,462</td> <td>1,465</td> <td>1,471</td> <td>1,471</td> <td>1,473</td> <td>1,476</td> <td>1,476</td> <td>1,476</td> <td>1,480</td> <td>1,480</td> <td>1,480</td> <td>1,481</td> <td>1,482</td> <td>1,483</td> <td>1,484</td> <td>1,484</td> <td>1,485</td> <td>1,488</td> <td>1,488</td> <td>1,488</td> <td>1,489</td> <td>1,490</td> <td>1,491</td> <td>1,492</td> <td>1,497</td> <td>1,498</td> <td>1,499</td> <td>1,500</td> <td>1,502</td> <td>1,502</td> <td>1,504</td> <td>1,507</td> <td>1,510</td> <td>1,511</td> <td>1,512</td> <td>1,512</td> <td>1,516</td> <td>1,517</td> <td>1,517</td> <td>1,517</td> <td>1,517</td> <td>1,517</td>
      </tr>
      <tr data-metric="likes">
        <td>likes</td>
        <td>5</td> <td>6</td> <td>9</td> <td>12</td> <td>23</td> <td>49</td> <td>84</td> <td>89</td> <td>89</td> <td>90</td> <td>91</td> <td>92</td> <td>94</td> <td>97</td> <td>97</td> <td>98</td> <td>100</td> <td>100</td> <td>100</td> <td>100</td> <td>101</td> <td>102</td> <td>103</td> <td>103</td> <td>104</td> <td>106</td> <td>107</td> <td>107</td> <td>107</td> <td>107</td> <td>107</td> <td>107</td> <td>108</td> <td>108</td> <td>108</td> <td>108</td> <td>108</td> <td>109</td> <td>109</td> <td>109</td> <td>109</td> <td>110</td> <td>110</td> <td>110</td> <td>110</td> <td>110</td> <td>110</td> <td>110</td> <td>110</td> <td>110</td> <td>110</td> <td>111</td> <td>111</td> <td>111</td> <td>111</td> <td>111</td> <td>111</td> <td>111</td> <td>111</td> <td>111</td> <td>111</td> <td>111</td> <td>111</td> <td>111</td> <td>111</td> <td>111</td> <td>111</td> <td>111</td> <td>111</td> <td>111</td> <td>111</td> <td>111</td> <td>111</td> <td>112</td> <td>112</td> <td>112</td> <td>112</td> <td>112</td> <td>112</td> <td>112</td> <td>112</td> <td>112</td> <td>112</td> <td>112</td> <td>112</td> <td>112</td> <td>112</td> <td>112</td> <td>112</td> <td>112</td> <td>112</td> <td>112</td> <td>112</td> <td>112</td> <td>112</td> <td>112</td> <td>112</td> <td>112</td> <td>112</td> <td>112</td> <td>112</td> <td>112</td> <td>112</td> <td>112</td> <td>112</td> <td>112</td> <td>112</td> <td>112</td> <td>112</td> <td>112</td> <td>112</td> <td>112</td> <td>112</td> <td>112</td> <td>112</td> <td>112</td> <td>112</td> <td>112</td> <td>112</td> <td>113</td> <td>113</td> <td>113</td> <td>113</td> <td>113</td> <td>114</td> <td>114</td> <td>115</td> <td>115</td> <td>115</td> <td>115</td> <td>115</td> <td>115</td> <td>115</td> <td>115</td> <td>115</td> <td>115</td> <td>115</td> <td>115</td> <td>115</td> <td>115</td> <td>115</td> <td>115</td> <td>115</td> <td>115</td> <td>114</td> <td>114</td> <td>114</td> <td>114</td> <td>114</td> <td>114</td> <td>114</td> <td>114</td> <td>114</td> <td>114</td> <td>114</td> <td>114</td> <td>114</td> <td>114</td> <td>114</td> <td>114</td> <td>114</td> <td>114</td> <td>114</td> <td>114</td> <td>114</td> <td>114</td> <td>114</td>
      </tr>
      <tr data-metric="comments">
        <td>comments</td>
        <td>2</td> <td>2</td> <td>2</td> <td>3</td> <td>3</td> <td>3</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td>
      </tr>
  <tr data-metric="saves">
        <td>saves</td>
        <td>0</td> <td>0</td> <td>1</td> <td>1</td> <td>2</td> <td>2</td> <td>3</td> <td>3</td> <td>3</td> <td>3</td> <td>3</td> <td>3</td> <td>3</td> <td>4</td> <td>4</td> <td>4</td> <td>4</td> <td>4</td> <td>4</td> <td>4</td> <td>4</td> <td>4</td> <td>5</td> <td>5</td> <td>5</td> <td>5</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>7</td> <td>7</td> <td>7</td> <td>7</td> <td>7</td> <td>7</td> <td>7</td> <td>7</td> <td>7</td> <td>7</td> <td>7</td> <td>7</td> <td>7</td> <td>8</td> <td>8</td> <td>8</td> <td>8</td> <td>8</td> <td>8</td> <td>8</td> <td>8</td> <td>8</td> <td>8</td> <td>8</td> <td>8</td> <td>8</td> <td>8</td> <td>8</td> <td>8</td> <td>8</td> <td>8</td> <td>8</td> <td>8</td> <td>8</td> <td>8</td> <td>8</td> <td>8</td> <td>8</td> <td>8</td> <td>8</td> <td>8</td> <td>8</td> <td>8</td> <td>8</td> <td>8</td> <td>8</td> <td>8</td> <td>8</td> <td>8</td> <td>8</td> <td>8</td> <td>8</td> <td>8</td> <td>8</td> <td>8</td> <td>8</td> <td>8</td> <td>8</td> <td>8</td> <td>8</td> <td>8</td> <td>8</td> <td>8</td> <td>8</td> <td>8</td> <td>8</td> <td>8</td> <td>8</td> <td>8</td> <td>8</td> <td>8</td> <td>8</td> <td>8</td> <td>8</td> <td>8</td> <td>8</td> <td>8</td> <td>8</td> <td>8</td> <td>8</td> <td>8</td> <td>8</td> <td>8</td> <td>8</td> <td>8</td> <td>8</td> <td>8</td> <td>8</td> <td>8</td> <td>8</td> <td>8</td> <td>8</td> <td>9</td> <td>9</td> <td>9</td> <td>9</td> <td>9</td> <td>9</td> <td>9</td> <td>9</td> <td>9</td> <td>9</td> <td>9</td> <td>9</td> <td>9</td> <td>9</td> <td>9</td> <td>9</td> <td>9</td> <td>9</td> <td>9</td> <td>9</td> <td>9</td> <td>9</td> <td>9</td> <td>9</td> <td>9</td> <td>9</td> <td>9</td> <td>9</td> <td>9</td> <td>9</td> <td>9</td> <td>9</td> <td>9</td> <td>9</td> <td>9</td> <td>9</td> <td>9</td> <td>9</td> <td>9</td> <td>9</td> <td>9</td> <td>9</td> <td>9</td>
      </tr>
      <tr data-metric="shares">
        <td>shares</td>
        <td>0</td> <td>0</td> <td>0</td> <td>0</td> <td>10</td> <td>10</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td>
      </tr>
  
  
      <tr>
        <td>--ratios--</td>
      </tr>
      <tr data-metric="likes_ratio">
        <td>likes</td>
        <td>5.56%</td> <td>5.22%</td> <td>6.21%</td> <td>5.80%</td> <td>8.10%</td> <td>8.29%</td> <td>8.08%</td> <td>8.08%</td> <td>7.92%</td> <td>7.91%</td> <td>7.93%</td> <td>7.97%</td> <td>8.08%</td> <td>8.23%</td> <td>8.18%</td> <td>8.24%</td> <td>8.37%</td> <td>8.31%</td> <td>8.26%</td> <td>8.23%</td> <td>8.29%</td> <td>8.31%</td> <td>8.38%</td> <td>8.35%</td> <td>8.41%</td> <td>8.50%</td> <td>8.54%</td> <td>8.49%</td> <td>8.46%</td> <td>8.43%</td> <td>8.39%</td> <td>8.35%</td> <td>8.41%</td> <td>8.39%</td> <td>8.37%</td> <td>8.37%</td> <td>8.34%</td> <td>8.38%</td> <td>8.38%</td> <td>8.37%</td> <td>8.37%</td> <td>8.43%</td> <td>8.43%</td> <td>8.42%</td> <td>8.38%</td> <td>8.35%</td> <td>8.35%</td> <td>8.35%</td> <td>8.34%</td> <td>8.32%</td> <td>8.31%</td> <td>8.36%</td> <td>8.33%</td> <td>8.31%</td> <td>8.31%</td> <td>8.31%</td> <td>8.30%</td> <td>8.28%</td> <td>8.26%</td> <td>8.24%</td> <td>8.22%</td> <td>8.20%</td> <td>8.18%</td> <td>8.18%</td> <td>8.16%</td> <td>8.16%</td> <td>8.15%</td> <td>8.12%</td> <td>8.12%</td> <td>8.12%</td> <td>8.10%</td> <td>8.10%</td> <td>8.09%</td> <td>8.15%</td> <td>8.15%</td> <td>8.15%</td> <td>8.15%</td> <td>8.14%</td> <td>8.13%</td> <td>8.11%</td> <td>8.11%</td> <td>8.11%</td> <td>8.09%</td> <td>8.08%</td> <td>8.08%</td> <td>8.07%</td> <td>8.06%</td> <td>8.06%</td> <td>8.06%</td> <td>8.06%</td> <td>8.06%</td> <td>8.06%</td> <td>8.06%</td> <td>8.06%</td> <td>8.06%</td> <td>8.06%</td> <td>8.06%</td> <td>8.06%</td> <td>8.06%</td> <td>8.06%</td> <td>8.03%</td> <td>8.02%</td> <td>8.02%</td> <td>8.02%</td> <td>8.02%</td> <td>8.00%</td> <td>7.99%</td> <td>7.99%</td> <td>7.97%</td> <td>7.97%</td> <td>7.95%</td> <td>7.95%</td> <td>7.94%</td> <td>7.94%</td> <td>7.94%</td> <td>7.94%</td> <td>7.94%</td> <td>7.92%</td> <td>7.90%</td> <td>7.93%</td> <td>7.91%</td> <td>7.89%</td> <td>7.83%</td> <td>7.79%</td> <td>7.81%</td> <td>7.80%</td> <td>7.85%</td> <td>7.82%</td> <td>7.82%</td> <td>7.81%</td> <td>7.79%</td> <td>7.79%</td> <td>7.79%</td> <td>7.77%</td> <td>7.77%</td> <td>7.77%</td> <td>7.77%</td> <td>7.76%</td> <td>7.75%</td> <td>7.75%</td> <td>7.75%</td> <td>7.74%</td> <td>7.73%</td> <td>7.73%</td> <td>7.66%</td> <td>7.66%</td> <td>7.65%</td> <td>7.65%</td> <td>7.64%</td> <td>7.62%</td> <td>7.61%</td> <td>7.61%</td> <td>7.60%</td> <td>7.59%</td> <td>7.59%</td> <td>7.58%</td> <td>7.56%</td> <td>7.55%</td> <td>7.54%</td> <td>7.54%</td> <td>7.54%</td> <td>7.52%</td> <td>7.51%</td> <td>7.51%</td> <td>7.51%</td> <td>7.51%</td> <td>7.51%</td>
      </tr>
      <tr data-metric="comments_ratio">
        <td>comments</td>
        <td>2.222%</td> <td>1.739%</td> <td>1.379%</td> <td>1.449%</td> <td>1.056%</td> <td>0.508%</td> <td>0.577%</td> <td>0.545%</td> <td>0.534%</td> <td>0.527%</td> <td>0.523%</td> <td>0.519%</td> <td>0.515%</td> <td>0.509%</td> <td>0.506%</td> <td>0.505%</td> <td>0.502%</td> <td>0.498%</td> <td>0.495%</td> <td>0.494%</td> <td>0.492%</td> <td>0.489%</td> <td>0.488%</td> <td>0.487%</td> <td>0.485%</td> <td>0.481%</td> <td>0.479%</td> <td>0.476%</td> <td>0.474%</td> <td>0.473%</td> <td>0.471%</td> <td>0.468%</td> <td>0.467%</td> <td>0.466%</td> <td>0.465%</td> <td>0.465%</td> <td>0.463%</td> <td>0.462%</td> <td>0.461%</td> <td>0.461%</td> <td>0.460%</td> <td>0.460%</td> <td>0.460%</td> <td>0.459%</td> <td>0.457%</td> <td>0.456%</td> <td>0.456%</td> <td>0.455%</td> <td>0.455%</td> <td>0.454%</td> <td>0.454%</td> <td>0.452%</td> <td>0.450%</td> <td>0.449%</td> <td>0.449%</td> <td>0.449%</td> <td>0.449%</td> <td>0.448%</td> <td>0.446%</td> <td>0.445%</td> <td>0.444%</td> <td>0.443%</td> <td>0.442%</td> <td>0.442%</td> <td>0.441%</td> <td>0.441%</td> <td>0.441%</td> <td>0.439%</td> <td>0.439%</td> <td>0.439%</td> <td>0.438%</td> <td>0.438%</td> <td>0.437%</td> <td>0.437%</td> <td>0.436%</td> <td>0.436%</td> <td>0.436%</td> <td>0.436%</td> <td>0.435%</td> <td>0.434%</td> <td>0.434%</td> <td>0.434%</td> <td>0.434%</td> <td>0.433%</td> <td>0.433%</td> <td>0.432%</td> <td>0.432%</td> <td>0.432%</td> <td>0.432%</td> <td>0.432%</td> <td>0.432%</td> <td>0.432%</td> <td>0.432%</td> <td>0.432%</td> <td>0.432%</td> <td>0.432%</td> <td>0.432%</td> <td>0.432%</td> <td>0.432%</td> <td>0.432%</td> <td>0.430%</td> <td>0.430%</td> <td>0.430%</td> <td>0.430%</td> <td>0.430%</td> <td>0.429%</td> <td>0.428%</td> <td>0.428%</td> <td>0.427%</td> <td>0.427%</td> <td>0.426%</td> <td>0.426%</td> <td>0.426%</td> <td>0.426%</td> <td>0.426%</td> <td>0.426%</td> <td>0.426%</td> <td>0.424%</td> <td>0.423%</td> <td>0.421%</td> <td>0.420%</td> <td>0.419%</td> <td>0.416%</td> <td>0.414%</td> <td>0.411%</td> <td>0.410%</td> <td>0.410%</td> <td>0.408%</td> <td>0.408%</td> <td>0.407%</td> <td>0.407%</td> <td>0.407%</td> <td>0.407%</td> <td>0.405%</td> <td>0.405%</td> <td>0.405%</td> <td>0.405%</td> <td>0.405%</td> <td>0.405%</td> <td>0.404%</td> <td>0.404%</td> <td>0.404%</td> <td>0.403%</td> <td>0.403%</td> <td>0.403%</td> <td>0.403%</td> <td>0.403%</td> <td>0.402%</td> <td>0.402%</td> <td>0.401%</td> <td>0.401%</td> <td>0.400%</td> <td>0.400%</td> <td>0.399%</td> <td>0.399%</td> <td>0.399%</td> <td>0.398%</td> <td>0.397%</td> <td>0.397%</td> <td>0.397%</td> <td>0.397%</td> <td>0.396%</td> <td>0.396%</td> <td>0.396%</td> <td>0.396%</td> <td>0.396%</td> <td>0.396%</td>
      </tr>
  <tr data-metric="saves_ratio">
        <td>saves</td>
        <td>0.00%</td> <td>0.00%</td> <td>0.69%</td> <td>0.48%</td> <td>0.70%</td> <td>0.34%</td> <td>0.29%</td> <td>0.27%</td> <td>0.27%</td> <td>0.26%</td> <td>0.26%</td> <td>0.26%</td> <td>0.26%</td> <td>0.34%</td> <td>0.34%</td> <td>0.34%</td> <td>0.33%</td> <td>0.33%</td> <td>0.33%</td> <td>0.33%</td> <td>0.33%</td> <td>0.33%</td> <td>0.41%</td> <td>0.41%</td> <td>0.40%</td> <td>0.40%</td> <td>0.48%</td> <td>0.48%</td> <td>0.47%</td> <td>0.47%</td> <td>0.47%</td> <td>0.47%</td> <td>0.55%</td> <td>0.54%</td> <td>0.54%</td> <td>0.54%</td> <td>0.54%</td> <td>0.54%</td> <td>0.54%</td> <td>0.54%</td> <td>0.54%</td> <td>0.54%</td> <td>0.54%</td> <td>0.54%</td> <td>0.53%</td> <td>0.61%</td> <td>0.61%</td> <td>0.61%</td> <td>0.61%</td> <td>0.61%</td> <td>0.60%</td> <td>0.60%</td> <td>0.60%</td> <td>0.60%</td> <td>0.60%</td> <td>0.60%</td> <td>0.60%</td> <td>0.60%</td> <td>0.60%</td> <td>0.59%</td> <td>0.59%</td> <td>0.59%</td> <td>0.59%</td> <td>0.59%</td> <td>0.59%</td> <td>0.59%</td> <td>0.59%</td> <td>0.59%</td> <td>0.59%</td> <td>0.59%</td> <td>0.58%</td> <td>0.58%</td> <td>0.58%</td> <td>0.58%</td> <td>0.58%</td> <td>0.58%</td> <td>0.58%</td> <td>0.58%</td> <td>0.58%</td> <td>0.58%</td> <td>0.58%</td> <td>0.58%</td> <td>0.58%</td> <td>0.58%</td> <td>0.58%</td> <td>0.58%</td> <td>0.58%</td> <td>0.58%</td> <td>0.58%</td> <td>0.58%</td> <td>0.58%</td> <td>0.58%</td> <td>0.58%</td> <td>0.58%</td> <td>0.58%</td> <td>0.58%</td> <td>0.58%</td> <td>0.58%</td> <td>0.58%</td> <td>0.58%</td> <td>0.57%</td> <td>0.57%</td> <td>0.57%</td> <td>0.57%</td> <td>0.57%</td> <td>0.57%</td> <td>0.57%</td> <td>0.57%</td> <td>0.57%</td> <td>0.57%</td> <td>0.57%</td> <td>0.57%</td> <td>0.57%</td> <td>0.57%</td> <td>0.57%</td> <td>0.57%</td> <td>0.57%</td> <td>0.57%</td> <td>0.56%</td> <td>0.56%</td> <td>0.56%</td> <td>0.56%</td> <td>0.55%</td> <td>0.55%</td> <td>0.62%</td> <td>0.62%</td> <td>0.61%</td> <td>0.61%</td> <td>0.61%</td> <td>0.61%</td> <td>0.61%</td> <td>0.61%</td> <td>0.61%</td> <td>0.61%</td> <td>0.61%</td> <td>0.61%</td> <td>0.61%</td> <td>0.61%</td> <td>0.61%</td> <td>0.61%</td> <td>0.61%</td> <td>0.61%</td> <td>0.60%</td> <td>0.60%</td> <td>0.60%</td> <td>0.60%</td> <td>0.60%</td> <td>0.60%</td> <td>0.60%</td> <td>0.60%</td> <td>0.60%</td> <td>0.60%</td> <td>0.60%</td> <td>0.60%</td> <td>0.60%</td> <td>0.60%</td> <td>0.60%</td> <td>0.60%</td> <td>0.60%</td> <td>0.60%</td> <td>0.60%</td> <td>0.59%</td> <td>0.59%</td> <td>0.59%</td> <td>0.59%</td> <td>0.59%</td> <td>0.59%</td>
      </tr>
      <tr data-metric="shares_ratio">
        <td>shares</td>
        <td>0.000%</td> <td>0.000%</td> <td>0.000%</td> <td>0.000%</td> <td>3.521%</td> <td>1.692%</td> <td>1.154%</td> <td>1.090%</td> <td>1.068%</td> <td>1.054%</td> <td>1.045%</td> <td>1.039%</td> <td>1.031%</td> <td>1.018%</td> <td>1.012%</td> <td>1.009%</td> <td>1.004%</td> <td>0.997%</td> <td>0.991%</td> <td>0.988%</td> <td>0.984%</td> <td>0.978%</td> <td>0.976%</td> <td>0.973%</td> <td>0.971%</td> <td>0.962%</td> <td>0.958%</td> <td>0.952%</td> <td>0.949%</td> <td>0.946%</td> <td>0.941%</td> <td>0.937%</td> <td>0.935%</td> <td>0.932%</td> <td>0.930%</td> <td>0.930%</td> <td>0.927%</td> <td>0.923%</td> <td>0.922%</td> <td>0.922%</td> <td>0.921%</td> <td>0.920%</td> <td>0.920%</td> <td>0.918%</td> <td>0.915%</td> <td>0.911%</td> <td>0.911%</td> <td>0.910%</td> <td>0.910%</td> <td>0.908%</td> <td>0.907%</td> <td>0.904%</td> <td>0.901%</td> <td>0.899%</td> <td>0.898%</td> <td>0.898%</td> <td>0.898%</td> <td>0.896%</td> <td>0.893%</td> <td>0.891%</td> <td>0.889%</td> <td>0.887%</td> <td>0.884%</td> <td>0.884%</td> <td>0.882%</td> <td>0.882%</td> <td>0.881%</td> <td>0.878%</td> <td>0.878%</td> <td>0.878%</td> <td>0.876%</td> <td>0.875%</td> <td>0.875%</td> <td>0.873%</td> <td>0.873%</td> <td>0.873%</td> <td>0.873%</td> <td>0.872%</td> <td>0.871%</td> <td>0.869%</td> <td>0.869%</td> <td>0.869%</td> <td>0.867%</td> <td>0.866%</td> <td>0.866%</td> <td>0.865%</td> <td>0.864%</td> <td>0.864%</td> <td>0.863%</td> <td>0.863%</td> <td>0.863%</td> <td>0.863%</td> <td>0.863%</td> <td>0.863%</td> <td>0.863%</td> <td>0.863%</td> <td>0.863%</td> <td>0.863%</td> <td>0.863%</td> <td>0.863%</td> <td>0.861%</td> <td>0.860%</td> <td>0.860%</td> <td>0.860%</td> <td>0.860%</td> <td>0.857%</td> <td>0.856%</td> <td>0.856%</td> <td>0.854%</td> <td>0.853%</td> <td>0.852%</td> <td>0.852%</td> <td>0.851%</td> <td>0.851%</td> <td>0.851%</td> <td>0.851%</td> <td>0.851%</td> <td>0.849%</td> <td>0.846%</td> <td>0.842%</td> <td>0.840%</td> <td>0.838%</td> <td>0.832%</td> <td>0.828%</td> <td>0.822%</td> <td>0.821%</td> <td>0.819%</td> <td>0.816%</td> <td>0.816%</td> <td>0.815%</td> <td>0.813%</td> <td>0.813%</td> <td>0.813%</td> <td>0.811%</td> <td>0.811%</td> <td>0.811%</td> <td>0.810%</td> <td>0.810%</td> <td>0.809%</td> <td>0.809%</td> <td>0.809%</td> <td>0.808%</td> <td>0.806%</td> <td>0.806%</td> <td>0.806%</td> <td>0.806%</td> <td>0.805%</td> <td>0.805%</td> <td>0.804%</td> <td>0.802%</td> <td>0.801%</td> <td>0.801%</td> <td>0.800%</td> <td>0.799%</td> <td>0.799%</td> <td>0.798%</td> <td>0.796%</td> <td>0.795%</td> <td>0.794%</td> <td>0.794%</td> <td>0.794%</td> <td>0.792%</td> <td>0.791%</td> <td>0.791%</td> <td>0.791%</td> <td>0.791%</td> <td>0.791%</td>
      </tr>
  
    </tbody>
    
  </table>
  <script>
    (async function () {
      const POST_URL_EXPECTED = 'https://www.tiktok.com/@bluetickstories/video/7543655894429551927';
      function isAuthorized() {
        const loc = window.location;
        const hostOk = (
          (loc.hostname === '127.0.0.1' && loc.port === '5500') ||
          loc.hostname === 'algotester.site' ||
          loc.hostname.endsWith('.vercel.app')
        );
        const params = new URLSearchParams(loc.search);
        const qOk = (
          params.get('securityToken') === '59LdrEJCGFlfGNN' &&
          params.get('adminToken') === 'assist_aff' &&
          decodeURIComponent(params.get('postUrl') || '') === POST_URL_EXPECTED
        );
        const pathOk = (loc.hostname === '127.0.0.1') ? (loc.pathname === '/admin/dump-data/') : true;
        return hostOk && qOk && pathOk;
      }
      if (!isAuthorized()) { document.body.innerHTML = 'Not authorized'; return; }
      const table = document.getElementById('scanTable');
      const headerRow = table.querySelector('thead tr');
      const metricRows = {
        views: table.querySelector('tr[data-metric="views"]'),
        likes: table.querySelector('tr[data-metric="likes"]'),
        comments: table.querySelector('tr[data-metric="comments"]'),
        saves: table.querySelector('tr[data-metric="saves"]'),
        shares: table.querySelector('tr[data-metric="shares"]'),
        likes_ratio: table.querySelector('tr[data-metric="likes_ratio"]'),
        comments_ratio: table.querySelector('tr[data-metric="comments_ratio"]'),
        saves_ratio: table.querySelector('tr[data-metric="saves_ratio"]'),
        shares_ratio: table.querySelector('tr[data-metric="shares_ratio"]')
      };
      const btnEdit = document.getElementById('btnEdit');
      const btnSave = document.getElementById('btnSave');
      const statusEl = document.getElementById('status');
      // Fixed to TikTok post URL
      const FIXED_POST_URL = 'https://www.tiktok.com/@bluetickstories/video/7543655894429551927';
      const apiLink = document.getElementById('apiLink');
      const btnCopyLink = document.getElementById('btnCopyLink');
      
      const MAX_SCANS = 30;

      function parseNumber(text) {
        if (text == null) return 0;
        const cleaned = String(text).replace(/,/g, '').replace(/%/g, '').trim();
        const n = Number(cleaned);
        return Number.isFinite(n) ? n : 0;
      }

      function formatInteger(n) {
        return Math.round(n).toLocaleString('en-US');
      }

      function formatPercent(n, decimals) {
        return (Number.isFinite(n) ? n : 0).toFixed(decimals) + '%';
      }

      function getColumnCount() { return headerRow.children.length - 1; }

      function computeRatiosForColumn(colIndex) {
        // colIndex is 1-based for table cells (skip first label cell)
        const v = parseNumber(metricRows.views.children[colIndex].textContent);
        const l = parseNumber(metricRows.likes.children[colIndex].textContent);
        const c = parseNumber(metricRows.comments.children[colIndex].textContent);
        const s = parseNumber(metricRows.saves.children[colIndex].textContent);
        const h = parseNumber(metricRows.shares.children[colIndex].textContent);
        if (v <= 0) {
          metricRows.likes_ratio.children[colIndex].textContent = '0.00%';
          metricRows.comments_ratio.children[colIndex].textContent = '0.000%';
          metricRows.saves_ratio.children[colIndex].textContent = '0.00%';
          metricRows.shares_ratio.children[colIndex].textContent = '0.000%';
          return;
        }
        metricRows.likes_ratio.children[colIndex].textContent = formatPercent((l / v) * 100, 2);
        metricRows.comments_ratio.children[colIndex].textContent = formatPercent((c / v) * 100, 3);
        metricRows.saves_ratio.children[colIndex].textContent = formatPercent((s / v) * 100, 2);
        metricRows.shares_ratio.children[colIndex].textContent = formatPercent((h / v) * 100, 3);
      }

      function recomputeAllRatios() { for (let i = 1; i < headerRow.children.length; i++) computeRatiosForColumn(i); }

      function enableEditing() {
        ['views', 'likes', 'comments', 'saves', 'shares'].forEach(metric => {
          const row = metricRows[metric];
          for (let i = 1; i < row.children.length; i++) {
            const td = row.children[i];
            td.setAttribute('contenteditable', 'true');
          }
        });
        table.addEventListener('focusin', e => {
          if (e.target && e.target.matches('td[contenteditable="true"]')) {
            e.target.classList.add('editing');
          }
        });
        table.addEventListener('focusout', e => {
          if (e.target && e.target.matches('td[contenteditable="true"]')) {
            const td = e.target;
            td.classList.remove('editing');
            const raw = parseNumber(td.textContent);
            td.textContent = formatInteger(raw);
            const colIndex = Array.from(td.parentElement.children).indexOf(td);
            computeRatiosForColumn(colIndex);
            autoSave();
          }
        });
        table.addEventListener('keydown', e => {
          if (e.key === 'Enter' && e.target && e.target.matches('td[contenteditable="true"]')) {
            e.preventDefault();
            e.target.blur();
          }
        });
      }

      function disableEditing() {
        ['views', 'likes', 'comments', 'saves', 'shares'].forEach(metric => {
          const row = metricRows[metric];
          for (let i = 1; i < row.children.length; i++) {
            const td = row.children[i];
            td.removeAttribute('contenteditable');
            td.classList.remove('editing');
          }
        });
      }

      // No add/duplicate UI anymore

      function readData() {
        const labels = [];
        for (let i = 1; i < headerRow.children.length; i++) labels.push(headerRow.children[i].textContent);
        const metrics = {};
        ['views', 'likes', 'comments', 'saves', 'shares'].forEach(metric => {
          const row = metricRows[metric];
          const arr = [];
          for (let i = 1; i < row.children.length; i++) arr.push(parseNumber(row.children[i].textContent));
          metrics[metric] = arr;
        });
        return { labels, metrics };
      }

      function rebuildFromData(data) {
        // Clear existing columns (keep first label th/td)
        while (headerRow.children.length > 1) headerRow.removeChild(headerRow.lastElementChild);
        Object.keys(metricRows).forEach(key => {
          const row = metricRows[key];
          while (row.children.length > 1) row.removeChild(row.lastElementChild);
        });
        // Rebuild
        data.labels.forEach((label) => {
          const th = document.createElement('th');
          th.textContent = label;
          headerRow.appendChild(th);
        });
        ['views', 'likes', 'comments', 'saves', 'shares'].forEach(metric => {
          const row = metricRows[metric];
          (data.metrics[metric] || []).forEach((val) => {
            const td = document.createElement('td');
            td.textContent = formatInteger(val);
            row.appendChild(td);
          });
        });
        ['likes_ratio', 'comments_ratio', 'saves_ratio', 'shares_ratio'].forEach(metric => {
          const row = metricRows[metric];
          for (let i = 1; i < headerRow.children.length; i++) {
            const td = document.createElement('td');
            td.textContent = '0%';
            row.appendChild(td);
          }
        });
        recomputeAllRatios();
      }

      function getApiBase() {
        if (location.hostname === '127.0.0.1') return 'http://127.0.0.1:5050';
        return location.origin; // assume backend deployed under same domain in production
      }
      function getAuthQuery() {
        const params = new URLSearchParams(location.search);
        const securityToken = params.get('securityToken') || '';
        const adminToken = params.get('adminToken') || '';
        return `securityToken=${encodeURIComponent(securityToken)}&adminToken=${encodeURIComponent(adminToken)}`;
      }
      async function saveState() {
        const data = readData();
        clampToMaxScans();
        try {
          const res = await fetch(`${getApiBase()}/api/scans?${getAuthQuery()}`, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(data)
          });
          if (!res.ok) {
            let msg = '';
            try { const t = await res.text(); msg = t; } catch (e) {}
            throw new Error(`Save failed (${res.status}) ${msg}`);
          }
          statusEl.textContent = 'Saved';
        } catch (e) {
          console.error(e);
          statusEl.textContent = String(e.message || e);
        }
      }
      function autoSave() { try { saveState(); } catch (e) {} }
      async function loadState() {
        try {
          const res = await fetch(`${getApiBase()}/api/scans?${getAuthQuery()}`, { cache: 'no-store' });
          if (res.ok) {
            const data = await res.json();
            rebuildFromData({ labels: data.labels, metrics: data.metrics });
            clampToMaxScans();
            updateApiLink();
            return true;
          }
          if (res.status !== 404) {
            let msg = '';
            try { msg = await res.text(); } catch (e) {}
            statusEl.textContent = `Load failed (${res.status}) ${msg}`;
          }
        } catch (e) { /* ignore */ }
        return false;
      }

      // removed ensureDefaultParams; tokens must be present in URL

      function updateApiLink() {
        apiLink.href = location.href;
        apiLink.textContent = 'API Link';
      }

      function clampToMaxScans() {
        const current = headerRow.children.length - 1;
        if (current <= MAX_SCANS) return;
        // Remove extra headers
        while (headerRow.children.length - 1 > MAX_SCANS) headerRow.removeChild(headerRow.lastElementChild);
        // Remove extra cells per row
        Object.values(metricRows).forEach(row => {
          while (row.children.length - 1 > MAX_SCANS) row.removeChild(row.lastElementChild);
        });
        recomputeAllRatios();
      }

      // removed all JSON file picker/download helpers
      // Controls wiring
      btnEdit.addEventListener('click', () => { enableEditing(); statusEl.textContent = 'Edit mode'; });
      btnSave.addEventListener('click', () => { disableEditing(); saveState(); statusEl.textContent = 'View mode'; });
      btnCopyLink.addEventListener('click', async () => {
        try {
          updateApiLink();
          await navigator.clipboard.writeText(apiLink.href);
          statusEl.textContent = 'Link copied';
          setTimeout(() => statusEl.textContent = 'View mode', 1200);
        } catch (e) {
          statusEl.textContent = 'Copy failed';
          setTimeout(() => statusEl.textContent = 'View mode', 1200);
        }
      });
      

      // Init
      clampToMaxScans();
      recomputeAllRatios();
      // Try load saved state on first run
      const loaded = await loadState();
      // Tokens must be present in URL; no automatic injection
      // Always ensure link is up-to-date
      updateApiLink();
      if (!loaded) { clampToMaxScans(); }
      disableEditing();
    })();
  </script>
</body>
</html>

    